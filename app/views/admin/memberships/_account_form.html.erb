<%= admin_form_for [:admin, parent, resource] do |f| %>
  <%= f.inputs do %>
    <%= f.input :user,
                collection: f.object.new_record? ? membership_users_collection_for_parent(parent) : [[resource.user.formal_name, resource.user_id]],
                include_blank: false,
                input_html: { disabled: !f.object.new_record? || parent_type.to_s == 'user' }%>
    <%= f.input :entity,
                label: I18n.t('activerecord.attributes.pageflow/membership.account'),
                collection: f.object.new_record? ? membership_accounts_collection_for_parent(parent) : [[resource.entity.name, resource.entity_id]],
                include_blank: false,
                input_html: { disabled: !f.object.new_record? } %>
    <%= f.hidden_field :entity_type, value: 'Pageflow::Account' %>
    <%= f.input :role,
                :collection => membership_roles_collection('Pageflow::Account'),
                include_blank: false %>
  <% end %>
  <%= f.actions do %>
    <%= f.action(:submit) %>
    <%= f.action(:cancel, :wrapper_html => {:class => 'cancel'}) %>
  <% end %>
<% end %>
